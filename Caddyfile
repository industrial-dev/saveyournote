# Caddyfile para SaveYourNote
# Para desarrollo local, usa localhost
# Para producci贸n, reemplaza con tu dominio: api.saveyournote.com

localhost {
    reverse_proxy api:8080
    
    # Logs
    log {
        output file /var/log/caddy/access.log
        format json
    }
    
    # Headers de seguridad
    header {
        # Habilitar HSTS
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        # Prevenir clickjacking
        X-Frame-Options "DENY"
        # Prevenir MIME sniffing
        X-Content-Type-Options "nosniff"
        # XSS Protection
        X-XSS-Protection "1; mode=block"
        # Referrer Policy
        Referrer-Policy "strict-origin-when-cross-origin"
    }
    
    # Compresi贸n
    encode gzip zstd
}

# Configuraci贸n para producci贸n (descomenta y reemplaza con tu dominio)
# api.saveyornote.com {
#     reverse_proxy api:8080
#     
#     log {
#         output file /var/log/caddy/access.log
#         format json
#     }
#     
#     header {
#         Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
#         X-Frame-Options "DENY"
#         X-Content-Type-Options "nosniff"
#         X-XSS-Protection "1; mode=block"
#         Referrer-Policy "strict-origin-when-cross-origin"
#     }
#     
#     encode gzip zstd
# }
